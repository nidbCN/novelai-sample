(function(){"use strict";var e={5837:function(e,t,a){var s=a(144),n=a(3726),l=a(3102),r=function(){var e=this,t=e._self._c;return t(n.Z,[t("NavBar"),t(l.Z,[t("MainPage")],1)],1)},o=[],i=a(3381),c=a(3816),d=a(5255),u=a(7024),p=a(1819),m=a(3240),b=a(9088),h=a(7894),f=a(9200),k=a(9007),y=a(2379),g=a(3984),Z=a(9536),v=function(){var e=this,t=e._self._c;return t(p.Z,[t(h.Z,[t(u.Z,{attrs:{cols:"7"}},[t(p.Z,[t(h.Z,{staticClass:"my-4"},[t(c.Z,{attrs:{width:"100%"}},[t(d.EB,[e._v("设置")]),t(d.ZB,[t(m.Z,[t(h.Z,[t(u.Z,{attrs:{cols:"12"}},[t(k.Z,{attrs:{label:"后端地址",required:""},model:{value:e.backend.url,callback:function(t){e.$set(e.backend,"url",t)},expression:"backend.url"}})],1)],1),t(h.Z,[t(u.Z,[t(k.Z,{attrs:{counter:4,label:"宽度",required:""},model:{value:e.backend.payload.width,callback:function(t){e.$set(e.backend.payload,"width",t)},expression:"backend.payload.width"}})],1),t(u.Z,{attrs:{cols:"3"}},[t(k.Z,{attrs:{counter:4,label:"高度",required:""},model:{value:e.backend.payload.height,callback:function(t){e.$set(e.backend.payload,"height",t)},expression:"backend.payload.height"}})],1),t(u.Z,{attrs:{cols:"6"}},[t(f.Z,{attrs:{items:e.options.sampler,label:"采样方法"},model:{value:e.backend.payload.sampler,callback:function(t){e.$set(e.backend.payload,"sampler",t)},expression:"backend.payload.sampler"}})],1)],1),t(h.Z,[t(u.Z,{attrs:{cols:"12"}},[t(y.Z,{attrs:{rows:"5",label:"标签"},model:{value:e.backend.payload.prompt,callback:function(t){e.$set(e.backend.payload,"prompt",t)},expression:"backend.payload.prompt"}})],1)],1),t(h.Z,[t(u.Z,{attrs:{cols:"12"}},[t(y.Z,{attrs:{rows:"3",label:"负面标签"},model:{value:e.backend.payload.uc,callback:function(t){e.$set(e.backend.payload,"uc",t)},expression:"backend.payload.uc"}})],1)],1),t(h.Z,[t(u.Z,{attrs:{cols:"3"}},[t(k.Z,{attrs:{label:"step"},model:{value:e.backend.payload.step,callback:function(t){e.$set(e.backend.payload,"step",t)},expression:"backend.payload.step"}})],1),t(u.Z,{attrs:{cols:"3"}},[t(k.Z,{attrs:{label:"scale"},model:{value:e.backend.payload.scale,callback:function(t){e.$set(e.backend.payload,"scale",t)},expression:"backend.payload.scale"}})],1),t(u.Z,{attrs:{cols:"3"}},[t(k.Z,{attrs:{"append-icon":"mdi-refresh",label:"种子"},on:{"click:append":function(t){e.backend.payload.seed=parseInt(1e6*Math.random(),10)}},model:{value:e.backend.payload.seed,callback:function(t){e.$set(e.backend.payload,"seed",t)},expression:"backend.payload.seed"}})],1),t(u.Z,{attrs:{cols:"3"}},[t(k.Z,{attrs:{label:"张数"},model:{value:e.backend.payload.n_samples,callback:function(t){e.$set(e.backend.payload,"n_samples",t)},expression:"backend.payload.n_samples"}})],1)],1)],1)],1)],1)],1)],1)],1),t(u.Z,{attrs:{cols:"5"}},[t(p.Z,[t(h.Z,{staticClass:"my-4"},[t(c.Z,{attrs:{width:"100%"}},[t(d.h7,[t(i.Z,{attrs:{color:"primary",loading:e.status.requestLock},on:{click:e.generateImage}},[t(b.Z,[e._v("mdi-cloud-download")]),e._v(" 生成图片 ")],1),t(i.Z,{attrs:{color:"error"},on:{click:e.removeAllImage}},[t(b.Z,[e._v("mdi-delete-empty")]),e._v(" 清空图片 ")],1)],1)],1)],1),t(h.Z,{staticClass:"my-4"},[t(c.Z,{attrs:{width:"100%",height:"370px"}},[t(d.EB,[e._v("图像")]),t(c.Z,{staticClass:"overflow-y-auto",attrs:{"max-height":"300px",flat:"",tile:""}},e._l(e.status.imageList,(function(a,s){return t(p.Z,{key:s},[t(c.Z,{attrs:{tile:""}},[t("img",{staticStyle:{width:"100%","max-height":"200px","object-fit":"contain"},attrs:{alt:"image result",src:a.data}}),t(d.ZB,{staticClass:"cyan lighten-5"},[t(i.Z,{attrs:{color:"success",small:"",icon:""},on:{click:function(t){return e.saveImage(s)}}},[t(b.Z,[e._v("mdi-content-save")])],1),t(i.Z,{attrs:{color:"error",small:"",icon:""},on:{click:function(t){return e.removeImage(s)}}},[t(b.Z,[e._v("mdi-delete")])],1),t(i.Z,{attrs:{color:"primary",small:"",icon:""},on:{click:function(t){return e.openImage(s)}}},[t(b.Z,[e._v("mdi-open-in-new")])],1),t("span",{staticClass:"float-right"},[e._v("seed: "),t("code",[e._v(e._s(a.seed))])])],1)],1)],1)})),1)],1)],1),t(h.Z,{staticClass:"my-4"},[t(c.Z,{attrs:{width:"100%",height:"260px"}},[t(d.EB,[e._v("请求")]),t(d.ZB,[t(c.Z,{staticClass:"overflow-y-auto",attrs:{dark:"",flat:"",tile:"","max-height":"180px"}},[t(g.Z,{attrs:{dark:!0}},[t(Z.Z,{staticClass:"overflow-visible overflow-x-auto"},[t("pre",{staticClass:"ma-4"},[e._v(e._s(JSON.stringify(e.backend.payload,null,2)))])])],1)],1)],1)],1)],1)],1)],1)],1)],1)},_=[],w=(a(541),a(196)),x={default:{backend:{url:"http://localhost:8000",payload:{prompt:"1girl, cute, school uniform, outside",uc:"lowres, bad anatomy, bad hands, text, error, missing fingers, extra digit, fewer digits, cropped, worst quality, low quality, normal quality, jpeg artifacts, signature, watermark, username, blurry",seed:114514,n_samples:1,sampler:"k_euler_ancestral",width:512,height:768,scale:8,steps:22}},website:{barTitle:"Novel AI frontend",links:[{icon:"mdi-github",text:"Github",link:"https://github.com/nidbCN/novelai-sample"}]}}},q={name:"MainPage",data:()=>({backend:{url:"http://localhost:8000/",payload:{prompt:"1girl, cute, school uniform, outside",uc:"lowres, bad anatomy, bad hands, text, error, missing fingers, extra digit, fewer digits, cropped, worst quality, low quality, normal quality, jpeg artifacts, signature, watermark, username, blurry",seed:114514,n_samples:1,sampler:"k_euler_ancestral",width:384,height:576,scale:8,steps:22}},options:{sampler:["plms","ddim","k_euler","k_euler_ancestral","k_heun","k_dpm_2","k_dpm_2_ancestral","k_lms"]},status:{imageList:[],requestLock:!1}}),mounted(){this.backend=x["default"].backend,this.$route.query["backend_url"]&&(this.backend.url=this.$route.query["backend_url"])},methods:{generateImage:function(){this.status.requestLock=!0,this.backend.url.endsWith("/")||(this.backend.url=this.backend.url+"/");const e={};for(const t in this.backend.payload)e[t]=this.backend.payload[t];e["prompt"]="masterpiece, best quality, "+e["prompt"],w.Z.post(this.backend.url+"generate",e).then((e=>{if(200!==e["status"]||e["data"]["error"])alert("非200的返回值，可能是出错了\n"+e["data"]["error"]);else{const t=e["data"]["output"];t.forEach((e=>{this.status.imageList.unshift({data:"data:image/png;base64,"+e,seed:this.backend.payload.seed})})),this.backend.payload.seed=parseInt(1e6*Math.random(),10)}this.status.requestLock=!1})).catch((e=>{alert("由于某些原因无法连接后端（通常是由于显存不足），请等待数分钟后端重启\n"+e["message"]),this.status.requestLock=!1}))},removeAllImage:function(){this.status.imageList.splice(0,this.status.imageList.length)},removeImage:function(e){this.status.imageList.splice(e,1)},openImage:function(e){const t=document.createElement("a");t.href=this.status.imageList[e]["data"],t.click()},saveImage:function(e){const t=document.createElement("a"),a=this.status.imageList[e];t.href=a["data"],t.download="image-"+a["seed"]+".png",t.click()}}},C=q,I=a(1001),O=(0,I.Z)(C,v,_,!1,null,null,null),L=O.exports,$=a(259),j=a(8895),P=a(2515),B=function(){var e=this,t=e._self._c;return t($.Z,{attrs:{app:"",color:"primary",dark:""}},[t(j.Z,[e._v(" "+e._s(this.website.barTitle)+" ")]),t(P.Z),e._l(e.website.links,(function(a,s){return t(i.Z,{key:s,attrs:{text:"",href:a.link}},[t(b.Z,[e._v(e._s(a.icon))]),e._v(" "+e._s(a.text)+" ")],1)}))],2)},N=[],T={name:"NavBar",data:()=>({website:{barTitle:"Novel AI frontend",links:[{icon:"mdi-github",text:"Github",link:"https://github.com/nidbCN/novelai-sample"}]}}),mounted(){this.website=x["default"].website}},E=T,M=(0,I.Z)(E,B,N,!1,null,"55377c15",null),S=M.exports,A={name:"App",components:{NavBar:S,MainPage:L}},G=A,F=(0,I.Z)(G,r,o,!1,null,null,null),J=F.exports,W=a(8986);s.ZP.use(W.Z);var z=new W.Z({});s.ZP.config.productionTip=!1,new s.ZP({vuetify:z,render:e=>e(J)}).$mount("#app")}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var l=t[s]={exports:{}};return e[s](l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,s,n,l){if(!s){var r=1/0;for(d=0;d<e.length;d++){s=e[d][0],n=e[d][1],l=e[d][2];for(var o=!0,i=0;i<s.length;i++)(!1&l||r>=l)&&Object.keys(a.O).every((function(e){return a.O[e](s[i])}))?s.splice(i--,1):(o=!1,l<r&&(r=l));if(o){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[s,n,l]}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,l,r=s[0],o=s[1],i=s[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(i)var d=i(a)}for(t&&t(s);c<r.length;c++)l=r[c],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(d)},s=self["webpackChunknovelai_sample"]=self["webpackChunknovelai_sample"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(5837)}));s=a.O(s)})();
//# sourceMappingURL=app.bbb5c601.js.map